# Chinook Database

Of course! The Chinook database is a classic sample database, often used to practice SQL. It's modeled after a digital media store (like a mini-iTunes) and includes tables for artists, albums, media tracks, invoices, and customers.

## Here are questions you could ask, categorized by difficulty and the concepts they test

### Beginner (Basic SELECT, WHERE, JOIN, ORDER BY, LIMIT)

These questions focus on retrieving and filtering data from single or two tables.

1. **Listing Data:** What are the names of all our playlists?
2. **Filtering:** Which customers are from Canada or Germany?
3. **Sorting:** List all artists in alphabetical order (A-Z).
4. **Simple JOIN:** Show all tracks and their corresponding album titles.
5. **Aggregation (COUNT):** How many tracks are there in the database?
6. **LIMIT:** Who are our top 5 customers based on their total spent (need to join to Invoice and sum)? *(A bit of a sneak peek to intermediate)*
7. **Search (LIKE):** Find all artists whose name starts with "A".
8. **Null Check:** Find all employees who don't have a reported-to manager (where ReportsTo is NULL).

### Intermediate (Aggregate Functions, GROUP BY, HAVING, Multiple JOINs)

These require grouping data and applying conditions to those groups.

1. **Grouping & Aggregation:** What is the total number of tracks in each playlist? Show the playlist name and the count.
2. **Revenue Analysis:** What is the total sales amount for each country? Display the country and the total sum, ordered from highest to lowest.
3. **Filtering Groups (HAVING):** Which artists have more than 1 album in the database?
4. **Multi-table JOIN:** List all tracks from the genre "Rock", including the track name, album title, and artist name.
5. **Customer Spending:** Show the top 10 customers by their total invoice amount. Include their full name and total spent.
6. **Employee Performance:** Which sales support agent has brought in the most total revenue? (Join Customers to Employees to Invoices).
7. **Popularity:** What are the top 5 most purchased tracks? How many times was each one purchased? (This requires joining Track -> InvoiceLine -> Invoice and counting).
8. **Album vs. Compilation:** Show the average track length for each album and compare it to the overall average track length.

### Advanced (Subqueries, CTEs, Window Functions, Complex Logic)

These questions require breaking problems down into multiple steps or using advanced SQL features.

1. **Correlated Subquery:** For each customer, find their single most expensive invoice. (Show customer name, invoice date, and total).
2. **Common Table Expression (CTE):** Using a CTE, calculate the total revenue generated by each media type.
3. **Window Functions (RANK):** Rank employees based on the total sales revenue of their assigned customers.
4. **Date Analysis:** Show the monthly sales trend for the year 2013. Group invoices by month and show the total for each month.
5. **Percentage of Total:** What percentage of total sales does each genre represent? (Requires a subquery or window function to get the overall total).
6. **Customer Loyalty:** Identify customers who have purchased music from at least 3 different genres.
7. **Gaps in Collection:** Find artists in the database for which we have tracks but no associated album. (This tests understanding of data integrity and joins).
8. **Recursive Query (if supported):** Build a full organizational chart for all employees, showing who reports to whom at all levels.

### Business Intelligence & "What-If" Scenarios

These questions mimic real-world business decisions and require creative SQL.

1. **Customer Segmentation:** Classify customers into tiers like "Gold", "Silver", and "Bronze" based on their total spending.
2. **Value of a Customer:** Calculate the average customer lifetime value (total revenue per customer).
3. **Hit-Maker Analysis:** Is there a correlation between an artist's number of albums and their total track sales?
4. **Playlist Analysis:** What is the most common genre in the "Music" playlist? The "Movies" playlist?
5. **Sales Commission:** If sales support agents get a 2% commission on sales from their customers, how much commission would each employee earn?
6. **Inventory Value:** If we were to sell every track in our database at its unit price, what would the total potential revenue be?

---

### Example Query for a Common Question

Let's answer one: **"Which artists have more than 1 album in the database?"**

```sql
SELECT 
    ar.Name AS ArtistName, 
    COUNT(al.AlbumId) AS NumberOfAlbums
FROM 
    Artist ar
JOIN 
    Album al ON ar.ArtistId = al.ArtistId
GROUP BY 
    ar.ArtistId, ar.Name
HAVING 
    COUNT(al.AlbumId) > 1
ORDER BY 
    NumberOfAlbums DESC;
```

**This query:**

1. **JOINs** the `Artist` table to the `Album` table.
2. **GROUPs BY** the artist, so we can count albums per artist.
3. **COUNTs** the albums for each group.
4. **Filters** the groups using **HAVING** to only show artists where the count is greater than 1.
5. **ORDERS** the results to see the most prolific artists first.

The Chinook database is excellent because it allows you to practice nearly every fundamental and advanced SQL concept in a clear and relatable context.
